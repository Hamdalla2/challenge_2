<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CSV converter</title>
<link rel="stylesheet" type="text/css" href="./css.css">
<script
  src="https://code.jquery.com/jquery-3.5.1.js"
  integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
  crossorigin="anonymous"></script>
</head>
<body>
    <p style="color:yellow">Convert JSON to CSV</p>
    <form action="/csv", method="post">
    <input id='file' type="file" onchange="up(this)"><p id='up'>Upload File</p> 
    </form>
    <br>
    <form action="/csv", method="post">
        <textarea id='text1' name="json" placeholder='example
        {
            "firstName": "Joshie",
            "lastName": "Wyattson",
            "county": "San Mateo",
            "city": "San Mateo",
            "role": "Broker",
            "sales": 1000000,
            "children": [
            {
              "firstName": "Beth Jr.",
              "lastName": "Johnson",
              "county": "San Mateo",
              "city": "Pacifica",
              "role": "Manager",
              "sales": 2900000,
              "children": [
                {
                  "firstName": "Smitty",
                  "lastName": "Won",
                  "county": "San Mateo",
                  "city": "Redwood City",
                  "role": "Sales Person",
                  "sales": 4800000,
                  "children": []
                },
                {
                  "firstName": "Allen",
                  "lastName": "Price",
                  "county": "San Mateo",
                  "city": "Burlingame",
                  "role": "Sales Person",
                  "sales": 2500000,
                  "children": []
                }
              ]
            },
            {
              "firstName": "Beth",
              "lastName": "Johnson",
              "county": "San Francisco",
              "city": "San Francisco",
              "role": "Broker/Sales Person",
              "sales": 7500000,
              "children": []
            }
          ]
        }'></textarea>
        <br>
        <button type="submit" onclick="convert()">Convert & Submit</button>
    </form>
    <br>
    <textarea id="text2" name="csv" placeholder="Result 
        firstName,lastName,county,city,role,sales
        Joshie,Wyattson,San Mateo,San Mateo,Broker,1000000
        Beth Jr.,Johnson,San Mateo,Pacifica,Manager,2900000
        Smitty,Won,San Mateo,Redwood City,Sales Person,4800000
        Allen,Price,San Mateo,Burlingame,Sales Person,2500000
        Beth,Johnson,San Francisco,San Francisco,Broker/Sales Person,7500000
    " readonly></textarea>
    <br>
    <form action="/csv" method="get">
        <button type="submit" href="app.js" download>Download Result</button>
      </form>
<script src="app.js"></script>
<script src="up.js"></script>
</body>
</html>